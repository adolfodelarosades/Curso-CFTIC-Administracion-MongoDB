# Jueves 06/02/2020

## Uso y rendimiento índices 

### Uso del índice

* El orden de los campos en la consulta no influye (por que Mongo parsea la consulta para colocarla de acuerdo al orden del índice)
* Para que la consulta use el índice debe contener campos que estén en los prefijos delimitados por el índice.
* Si tiene el primer campo, siempre usara el índice (la eficiencia ya es otra cosa)

### Elección del índice en caso de que varios índices se puedan utilizar.

* **Query Optimizer** que evalua para una determinada "forma" de la consulta cual de los índices es el más eficiente.
* Vuelca los planes ganadores en **Plan Cache**.

Podemos monitorizar los índices para saber cuales son los más usados y borrar los que menos se usen.

### Uso de los índices en las consultas ordenadas

Como se distribuye el uso de los recursos en MongoDB

Memoria Ram

* Indices 
* dataset "fuente de datos"

Disco Duro

* Datos almacenados

En el disco busco los datos que haga la consulta y la ordenación la hace en la RAM y es muy costoso, hay limete de 32 MB para ordenar.

¿Qué pasa si el orden del índice coincide con el orden de consulta? **Es más rápido** y se consume menos RAM.

**Tratar para las consultas ordenadas un índice**





